<div class="list-container">
  <div class="list-header">
    <ng-container *ngIf="!isEditingTitle; else editTitle">
      <h2 (dblclick)="editTitleMode()">{{ list.name }}</h2>
    </ng-container>
    <ng-template #editTitle>
      <input
        type="text"
        [(ngModel)]="list.name"
        (blur)="saveTitle()"
        (keydown.enter)="saveTitle()"
      />
    </ng-template>
    <div class="dropdown-container" #dropdownContainer>
      <button (click)="toggleMenu()" class="menu-button">⋯</button>
      <div *ngIf="isMenuOpen" class="menu-dropdown">
        <button (click)="deleteList()">Supprimer la liste</button>
        <button (click)="moveList('left')">Déplacer à gauche</button>
        <button (click)="moveList('right')">Déplacer à droite</button>
      </div>
    </div>
  </div>

  <div
    cdkDropList
    [cdkDropListData]="cards()"
    (cdkDropListDropped)="drop($event)"
    class="drop-container"
  >
    <div *ngIf="cards().length === 0 && (isDragging.isDragging$ | async)" class="empty-dropzone">
      Deposit your card here
    </div>
    <div
      *ngFor="let card of cards()"
      cdkDrag
      (cdkDragStarted)="onDragStarted(card)"
      (cdkDragEnded)="onDragEnded(card)"
      (cdkDragMoved)="onCardDragMoved($event)"
    >
      <ng-template cdkDragPreview>
        <div class="card-preview">
          <app-card-list [card]="card"></app-card-list>
        </div>
      </ng-template>
      <ng-template cdkDragPlaceholder>
        <div class="card-placeholder"></div>
      </ng-template>
      <app-card-list [card]="card"></app-card-list>
    </div>
  </div>
  <button (click)="openCreateModal()">+</button>
</div>
